<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mana Forge - Commander Gamification</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    
    <link rel="stylesheet" href="style.css">
    <!-- Light mode -->
    <link
    rel="icon"
    type="image/x-icon"
    media="(prefers-color-scheme: light)"
    href="https://raw.githubusercontent.com/Gabrielfrangetto/MagicSystem/main/favicon-light.ico"
    />
    <!-- Dark mode -->
    <link
    rel="icon"
    type="image/x-icon"
    media="(prefers-color-scheme: dark)"
    href="https://raw.githubusercontent.com/Gabrielfrangetto/MagicSystem/main/favicon-dark.ico"
    /> 
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>Mana Forge</h1>
                <p>FaÃ§a login para acessar seu perfil</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="email"><i class="bi bi-envelope"></i> Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password"><i class="bi bi-lock"></i> Senha:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-btn">Entrar</button>
                <div id="loginError" class="login-error" style="display: none;"></div>
            </form>
        </div>
    </div>

    <!-- ConteÃºdo Principal (oculto inicialmente) -->
    <div id="mainContent" class="container" style="display: none;">
        <!-- Player Selection Header -->
        <div class="player-selection">
            <div class="player-selector-container">
                <label for="playerSelector">ğŸ‘¤ Jogador Ativo:</label>
                <select id="playerSelector" class="player-selector">
                    <option value="">Carregando jogadores...</option>
                </select>
                <button id="addPlayerBtn" class="add-player-btn">â• Novo Jogador</button>
            </div>
            
            <!-- BotÃµes de Demo -->
            <div class="demo-controls" style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                <label style="color: #fff; font-weight: bold; margin-right: 10px;">ğŸ§ª Demo Ranking:</label>
                <button id="demoWinBtn" class="demo-btn" style="background: #4CAF50; color: white; border: none; padding: 8px 16px; margin: 0 5px; border-radius: 4px; cursor: pointer;">+60 XP (VitÃ³ria)</button>
                <button id="demoLossBtn" class="demo-btn" style="background: #f44336; color: white; border: none; padding: 8px 16px; margin: 0 5px; border-radius: 4px; cursor: pointer;">-10 XP (Derrota)</button>
            </div>
        </div>

        <!-- Header com Avatar e InformaÃ§Ãµes BÃ¡sicas -->
        <header class="player-header">
            <div class="avatar-section">
                <div class="avatar-frame">
                    <img id="playerAvatar" src="https://via.placeholder.com/120x120/4a5568/ffffff?text=Avatar" alt="Avatar do Jogador">
                </div>
                <div class="player-info">
                    <div class="player-header-top">
                        <div class="player-name-section">
                            <h1 id="playerName">Loading...</h1>
                            <div class="title-selector">
                                <select id="playerTitleSelect" class="title-select">
                                    <option value="Planeswalker Iniciante">Planeswalker Iniciante</option>
                                </select>
                                <div class="title-unlock-info" id="titleUnlockInfo">ğŸ”’ Desbloqueie mais tÃ­tulos completando achievements!</div>
                            </div>
                        </div>
                        <button id="logoutBtn" class="logout-btn" title="Sair do perfil">ğŸšª Logout</button>
                        <button onclick="document.getElementById('changePasswordModal').style.display = 'block'" class="logout-btn" title="Alterar Senha">ğŸ”’ Alterar Senha</button>
                    </div>
                    <div class="xp-section">
                        <div class="xp-bar-container">
                            <div class="xp-bar" id="xpBar"></div>
                            <span class="xp-text" id="xpText">Loading...</span>
                        </div>
                    </div>
                    <div class="currency">
                        <span class="mana-coins" id="manaCoins">ğŸ”®</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- NavegaÃ§Ã£o -->
        <nav class="main-nav">
            <button class="nav-btn active" data-tab="stats">Geral</button>
            <button class="nav-btn" data-tab="general">Maestria</button>
            <button class="nav-btn" data-tab="achievements">Conquistas</button>
            <button class="nav-btn" data-tab="ranking">Ranking</button>
            <button class="nav-btn" data-tab="missions">MissÃµes</button>
            <button class="nav-btn" data-tab="history">HistÃ³rico</button>
        </nav>

        <!-- ConteÃºdo Principal -->
        <main class="main-content">
            <!-- Aba Geral (ex-EstatÃ­sticas) -->
            <section id="stats" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Winrate Geral</h3>
                        <div class="stat-value" id="generalWinrate">Loading...</div>
                        <div class="stat-detail">Loading...</div>
                    </div>
                    <div class="stat-card">
                        <h3>Tema Favorito</h3>
                        <div class="stat-value" id="favoriteDeck">Loading...</div>
                        <div class="stat-detail">Loading...</div>
                    </div>
                    <div class="stat-card">
                        <h3>VitÃ³ria Mais RÃ¡pida</h3>
                        <div class="stat-value" id="fastestWin">Loading...</div>
                    </div>
                    <div class="stat-card">
                        <h3>SequÃªncia de VitÃ³rias</h3>
                        <div class="stat-value" id="winStreak">Loading...</div>
                        <div class="stat-detail">Loading...</div>
                    </div>
                </div>
                
                <div class="top-commanders-section">
                    <h3>Comandantes Favoritos</h3>
                    <div class="top-commanders-grid" id="topCommandersGrid">
                        <!-- SerÃ¡ preenchido via JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Aba Maestria (ex-Geral) -->
            <section id="general" class="tab-content">
                <div class="general-grid">
                    <div class="commander-mastery-section">
                        <h3>âš”ï¸ Maestria de Comandantes</h3>
                        <div class="mastery-description">
                            <p>EstatÃ­sticas Ãºnicas por comandante, independente do tema do deck</p>
                        </div>
                        <div id="commanderMasteryGrid" class="commander-mastery-grid">
                            <div class="loading">Carregando...</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Aba Conquistas -->
            <section id="achievements" class="tab-content">
                <!-- SeÃ§Ã£o de Conquistas em Destaque -->
                <div class="featured-achievements-section">
                    <h3>Conquistas em Destaque</h3>
                    <div class="featured-achievements-grid" id="featuredAchievementsList">
                        <!-- SerÃ¡ preenchido via JavaScript -->
                    </div>
                    <button id="manageFeaturedBtn" class="manage-featured-btn">âš™ï¸ Gerenciar Destaques</button>
                </div>

                <!-- Filtros e Controles -->
                <div class="achievements-controls">
                    <div class="achievements-filters">
                        <label for="categoryFilter">ğŸ“‚ Categoria:</label>
                        <select id="categoryFilter" class="category-filter">
                            <option value="all">Todas as Categorias</option>
                            <option value="VitÃ³ria">ğŸ† VitÃ³ria</option>
                            <option value="Archenemy">âš”ï¸ Archenemy</option>
                            <option value="Mulligan">ğŸ”„ Mulligan</option>
                            <option value="Land Drop">ğŸ”ï¸ Land Drop</option>
                            <option value="Comandante">ğŸ‘‘ Comandante</option>
                        </select>
                    </div>
                    <div class="achievements-search">
                        <input type="text" id="achievementSearch" placeholder="ğŸ” Buscar conquistas..." class="achievement-search-input">
                    </div>
                </div>

                <!-- Lista de Conquistas -->
                <div class="achievements-container">
                    <div class="achievements-grid" id="achievementsList">
                        <!-- SerÃ¡ preenchido via JavaScript -->
                    </div>
                </div>

                <!-- Controles de PaginaÃ§Ã£o -->
                <div class="pagination-controls">
                    <button id="prevPageBtn" class="pagination-btn" disabled>â¬…ï¸ Anterior</button>
                    <div class="pagination-info">
                        <span id="currentPageInfo">PÃ¡gina 1 de 1</span>
                        <span id="totalAchievementsInfo">(0 conquistas)</span>
                    </div>
                    <button id="nextPageBtn" class="pagination-btn" disabled>PrÃ³xima â¡ï¸</button>
                </div>
            </section>

            <!-- Aba Ranking -->
            <section id="ranking" class="tab-content">
                <div class="ranking-section">
                    <div class="current-rank">
                        <h3>Seu Ranking Atual</h3>
                        <div class="rank-display">
                            <div class="rank-icon" id="rankIcon">ğŸ¥‰</div>
                            <div class="rank-info">
                                <div class="rank-name" id="rankName">Bronze III</div>
                                <div class="rank-points" id="rankPoints">0 pontos</div>
                                <div class="rank-xp-info" id="rankXpInfo">0 / 100 XP para Bronze II</div>
                                <div class="rank-progress">
                                    <div class="rank-bar" id="rankBar"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Aba MissÃµes -->
            <section id="missions" class="tab-content">
                <div class="missions-container">
                    <h3>MissÃµes DiÃ¡rias</h3>
                    <div class="missions-list" id="dailyMissions">
                        <!-- SerÃ¡ preenchido via JavaScript -->
                    </div>
                    
                    <h3>MissÃµes Semanais</h3>
                    <div class="missions-list" id="weeklyMissions">
                        <!-- SerÃ¡ preenchido via JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Aba HistÃ³rico -->
            <section id="history" class="tab-content">
                <div class="history-filters">
                    <select id="deckFilter">
                        <option value="all">Todos os Decks</option>
                        <option value="dragons">DragÃµes Vermelhos</option>
                        <option value="control">Controle Azul</option>
                        <option value="aggro">Aggro Branco</option>
                    </select>
                    <select id="periodFilter">
                        <option value="week">Ãšltima Semana</option>
                        <option value="month">Ãšltimo MÃªs</option>
                        <option value="all">Todo PerÃ­odo</option>
                    </select>
                </div>
                <div class="match-history" id="matchHistory">
                    <!-- SerÃ¡ preenchido via JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para Conquistas -->
    <div id="achievementModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="achievement-unlock">
                <div class="achievement-icon">ğŸ†</div>
                <h2 id="modalAchievementTitle">Conquista Desbloqueada!</h2>
                <div class="achievement-name" id="modalAchievementName"></div>
                <div class="achievement-description" id="modalAchievementDesc"></div>
                <div class="achievement-unlock-date" id="modalAchievementDate" style="display: none;"></div>
                <div class="xp-reward" id="modalAchievementXP">+50 XP</div>
                
                <!-- SeÃ§Ã£o para achievements especiais -->
                <div id="specialAchievementSection" class="special-achievement-section" style="display: none;">
                    <div class="password-input-container">
                        <label for="achievementPassword">ğŸ” Digite a senha para desbloquear:</label>
                        <input type="password" id="achievementPassword" placeholder="Digite a senha..." class="password-input">
                        
                        <!-- Novo campo de data customizada -->
                        <div class="custom-date-container" style="margin-top: 15px;">
                            <label for="customUnlockDate">ğŸ“… Data de desbloqueio (opcional):</label>
                            <input type="date" id="customUnlockDate" class="custom-date-input">
                            <small class="date-help-text">Se nÃ£o informado, serÃ¡ usada a data atual</small>
                        </div>
                        
                        <button id="unlockSpecialBtn" class="unlock-special-btn">ğŸ”“ Desbloquear</button>
                    </div>
                    <div id="passwordError" class="password-error" style="display: none;"></div>
                    <div id="passwordSuccess" class="password-success" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Detalhes da Partida -->
    <div id="matchDetailsModal" class="modal">
        <div class="modal-content match-details-content">
            <span class="close" id="closeMatchDetails">&times;</span>
            <div class="match-details-header">
                <div class="match-result-badge" id="matchResultBadge"></div>
            </div>
            
            <div class="match-details-body">
                <!-- InformaÃ§Ãµes BÃ¡sicas -->
                <div class="details-section">
                    <h3>ğŸ“Š InformaÃ§Ãµes BÃ¡sicas</h3>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">ğŸ“… Data:</span>
                            <span class="detail-value" id="detailDate"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">ğŸ”„ Turnos:</span>
                            <span class="detail-value" id="detailTurns"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">ğŸ† Vencedor:</span>
                            <span class="detail-value" id="detailWinner"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">ğŸ¯ Primeiro Jogador:</span>
                            <span class="detail-value" id="detailFirstPlayer"></span>
                        </div>
                    </div>
                </div>

                <!-- Comandantes -->
                <div class="details-section">
                    <h3>ğŸ‘‘ Comandantes</h3>
                    <div class="commanders-list" id="detailCommanders"></div>
                </div>

                <!-- Ranking -->
                <div class="details-section">
                    <h3>ğŸ… Ranking Final</h3>
                    <div class="ranking-list" id="detailRanking"></div>
                </div>

                <!-- Mulligans -->
                <div class="details-section" id="mulligansSection">
                    <h3>ğŸ”„ Mulligans</h3>
                    <div class="mulligans-list" id="detailMulligans"></div>
                </div>

                <!-- Jogadas do Turno 1 -->
                <div class="details-section" id="turn1Section">
                    <h3>âš¡ Jogadas do Turno 1</h3>
                    <div class="turn1-list" id="detailTurn1"></div>
                </div>

                <!-- Land Drops -->
                <div class="details-section" id="landDropSection">
                    <h3>ğŸ”ï¸ Perdeu Land Drop?</h3>
                    <div class="landdrop-list" id="detailLandDrop"></div>
                </div>

                <!-- Comandante Removido -->
                <div class="details-section" id="commanderRemovedSection">
                    <h3>ğŸ’€ Comandante Removido</h3>
                    <div class="commander-removed-list" id="detailCommanderRemoved"></div>
                </div>

                <!-- Carta do Jogo -->
                <div class="details-section" id="gameCardSection">
                    <h3>ğŸŒŸ Carta do Jogo</h3>
                    <div class="game-card-display" id="detailGameCard"></div>
                </div>

                <!-- Cartas Finalizadoras -->
                <div class="details-section" id="finishingCardsSection">
                    <h3>âš”ï¸ Cartas Finalizadoras</h3>
                    <div class="finishing-cards-display" id="detailFinishingCards"></div>
                </div>

                <!-- Archenemy -->
                <div class="details-section" id="archenemySection">
                    <h3>ğŸ˜ˆ Archenemy</h3>
                    <div class="archenemy-display" id="detailArchenemy"></div>
                </div>

                <!-- ObservaÃ§Ãµes -->
                <div class="details-section" id="observationsSection">
                    <h3>ğŸ“ ObservaÃ§Ãµes</h3>
                    <div class="observations-display" id="detailObservations"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Adicionar apÃ³s a seÃ§Ã£o de navegaÃ§Ã£o -->
    <div class="match-registration">
        <button id="registerMatchBtn" class="register-btn">
            â• Cadastrar Partida
        </button>
        
        <div id="matchForm" class="match-form hidden">
            <h3>ğŸ“ Nova Partida</h3>
            
            <!-- Campo de Auto-preenchimento -->
            <div class="form-group full-width auto-fill-section">
                <label for="playersAutoFill">ğŸš€ Auto-preenchimento de Jogadores</label>
                <div class="auto-fill-container">
                    <input type="text" id="playersAutoFill" placeholder="Digite os nomes dos jogadores separados por vÃ­rgula (ex: JoÃ£o, Maria, Pedro, Ana)">
                    <button type="button" id="autoFillBtn" class="auto-fill-btn">âš¡ Preencher Automaticamente</button>
                </div>
                <small class="auto-fill-help">ğŸ’¡ Insira os nomes dos jogadores e clique em "Preencher Automaticamente" para distribuÃ­-los nos campos abaixo</small>
            </div>
            
            <div class="form-grid">
                <!-- Data -->
                <div class="form-group">
                    <label for="matchDate">ğŸ“… Data</label>
                    <input type="date" id="matchDate" required>
                </div>
                
                <!-- Turnos -->
                <div class="form-group">
                    <label for="matchTurns">ğŸ”„ Turnos</label>
                    <input type="number" id="matchTurns" min="1" placeholder="Ex: 8" required>
                </div>                
                <!-- Comandantes da Partida -->
                <div class="form-group full-width">
                    <label>ğŸ‘‘ Comandantes da Partida</label>
                    <div class="commanders-container" id="commandersContainer">
                        <div class="commander-entry">
                            <div class="commander-input-group">
                                <input type="text" class="commander-input" placeholder="Digite o nome do comandante..." required>
                                <input type="text" class="commander-partner" placeholder="Comandante Partner (opcional)">
                                <select class="commander-theme" required>
                                    <option value="">Selecione o tema do deck...</option>
                                    <option value="Big Mana">Big Mana</option>
                                    <option value="Clones // Theft">Clones // Theft</option>
                                    <option value="Combo">Combo</option>
                                    <option value="Control">Control</option>
                                    <option value="Discard">Discard</option>
                                    <option value="Exile">Exile</option>
                                    <option value="Fight">Fight</option>
                                    <option value="Group Slug">Group Slug</option>
                                    <option value="Kindred">Kindred</option>
                                    <option value="Kindred // Blink">Kindred // Blink</option>
                                    <option value="Kindred // Clones">Kindred // Clones</option>
                                    <option value="Kindred // Control">Kindred // Control</option>
                                    <option value="Kindred // Lifegain">Kindred // Lifegain</option>
                                    <option value="Lands Matter">Lands Matter</option>
                                    <option value="Legends // Aristocrats">Legends // Aristocrats</option>
                                    <option value="Lifegain">Lifegain</option>
                                    <option value="Mill">Mill</option>
                                    <option value="Self-Mill">Self-Mill</option>
                                    <option value="Control // Stax">Control // Stax</option>
                                    <option value="Theft">Theft</option>
                                    <option value="Tokens // +1/+1 Counters">Tokens // +1/+1 Counters</option>
                                    <option value="Voltron">Voltron</option>
                                    <option value="Wheels">Wheels</option>
                                </select>
                                <select class="commander-player" required>
                                    <option value="">Selecione o jogador...</option>
                                    <!-- SerÃ¡ preenchido dinamicamente -->
                                </select>
                                <div class="card-preview"></div>
                                <div class="partner-preview"></div>
                            </div>
                        </div>
                    </div>
                    <button type="button" id="addCommanderBtn" class="add-commander-btn">+ Adicionar Comandante</button>
                    <div class="commander-info">
                        <small>ğŸ’¡ Adicione atÃ© 4 comandantes e associe cada um ao jogador correspondente</small>
                    </div>
                </div>
                
                <!-- Quem ComeÃ§ou -->
                <div class="form-group">
                    <label for="firstPlayer">ğŸ² Quem ComeÃ§ou</label>
                    <select id="firstPlayer" required>
                        <option value="">Selecione...</option>
                        <!-- SerÃ¡ preenchido dinamicamente com os perfis cadastrados -->
                    </select>
                </div>
            </select>
        </div>
        
        <!-- Mulligans por Jogador -->
        <div class="form-group full-width">
            <label>ğŸ”„ Mulligans por Jogador</label>
            <div class="mulligans-container" id="mulligansContainer">
                <div class="mulligan-entry">
                    <div class="mulligan-input-group">
                        <select class="mulligan-player" required>
                            <option value="">Selecione o jogador...</option>
                            <!-- SerÃ¡ preenchido dinamicamente -->
                        </select>
                        <input type="number" class="mulligan-count" min="0" max="7" placeholder="0" required>
                    </div>
                </div>
            </div>
            <button type="button" id="addMulliganBtn" class="add-mulligan-btn">+ Adicionar Jogador</button>
        </div>
        
        <!-- Turno 1 por Jogador -->
        <div class="form-group full-width">
            <label>âš¡ Turno 1 por Jogador</label>
            <div class="turn1-container" id="turn1Container">
                <div class="turn1-entry">
                    <div class="turn1-input-group">
                        <select class="turn1-player" required>
                            <option value="">Selecione o jogador...</option>
                            <!-- SerÃ¡ preenchido dinamicamente -->
                        </select>
                        <select class="turn1-play" required>
                            <option value="">Selecione...</option>
                            <option value="land">Land</option>
                            <option value="land-1-card">Land, 1 Card</option>
                            <option value="land-2-cards">Land, 2 Cards</option>
                            <option value="land-3-cards">Land, 3 Cards</option>
                            <option value="no-drop">No Drop</option>
                        </select>
                    </div>
                </div>
            </div>
            <button type="button" id="addTurn1Btn" class="add-turn1-btn">+ Adicionar Jogador</button>
        </div>
        
        <!-- Land Drop Perdido por Jogador -->
        <div class="form-group full-width">
            <label>ğŸ”ï¸ Perdeu Land Drop?</label>
            <div class="landdrop-container" id="landdropContainer">
                <div class="landdrop-entry">
                    <div class="landdrop-input-group">
                        <select class="landdrop-player" required>
                            <option value="">Selecione o jogador...</option>
                            <!-- SerÃ¡ preenchido dinamicamente -->
                        </select>
                        <select class="landdrop-missed" required>
                            <option value="">Selecione...</option>
                            <option value="nao">NÃ£o</option>
                            <option value="sim">Sim</option>
                        </select>
                    </div>
                </div>
            </div>
            <button type="button" id="addLanddropBtn" class="add-landdrop-btn">+ Adicionar Jogador</button>
        </div>
        
        <!-- Comandante Removido por Jogador -->
        <div class="form-group full-width">
            <label>ğŸ’€ Comandante Removido por Jogador</label>
            <div class="commander-removed-container" id="commanderRemovedContainer">
                <div class="commander-removed-entry">
                    <div class="commander-removed-input-group">
                        <select class="commander-removed-player" required>
                            <option value="">Selecione o jogador...</option>
                        </select>
                        <input type="number" class="commander-removed-main-count" min="0" placeholder="Comandante Principal" required>
                        <input type="number" class="commander-removed-partner-count" min="0" placeholder="Partner (opcional)">
                    </div>
                </div>
            </div>
            <button type="button" id="addCommanderRemovedBtn" class="add-commander-removed-btn">+ Adicionar Jogador</button>
        </div>
        
        <!-- Vencedor -->
        <div class="form-group">
            <label for="winner">ğŸ† Vencedor</label>
            <select id="winner" required>
                <option value="">Selecione o vencedor...</option>
                <!-- SerÃ¡ preenchido dinamicamente com os perfis -->
            </select>
        </div>
        
        <!-- Carta do Jogo -->
        <div class="form-group full-width">
            <label for="gameCard">ğŸŒŸ Carta do Jogo</label>
            <div class="card-search-container">
                <input type="text" id="gameCard" placeholder="Carta que mais impactou o jogo...">
                <div id="gameCardPreview" class="card-preview"></div>
            </div>
            <!-- Novo campo para seleÃ§Ã£o do dono da carta -->
            <div class="form-group" style="margin-top: 10px;">
                <label for="gameCardOwner">ğŸ‘¤ Dono da Carta</label>
                <select id="gameCardOwner">
                    <option value="">Selecione o dono da carta...</option>
                    <!-- SerÃ¡ populado dinamicamente com os perfis -->
                </select>
            </div>
        </div>
        
        <!-- Archenemy -->
        <div class="form-group">
            <label for="archenemy">ğŸ˜ˆ Archenemy</label>
            <select id="archenemy">
                <option value="">Nenhum</option>
                <!-- SerÃ¡ populado dinamicamente -->
            </select>
        </div>
        
        <!-- Cartas Finalizadoras -->
        <div class="form-group full-width">
            <label for="finishingCards">âš”ï¸ Carta(s) Finalizadora(s)</label>
            <div class="finishing-cards-container">
                <div class="card-input-group">
                    <input type="text" class="finishing-card-input" placeholder="Carta finalizadora 1...">
                    <div class="card-preview"></div>
                </div>
                <button type="button" id="addFinishingCard" class="add-card-btn">+ Adicionar Carta</button>
            </div>
        </div>
        
        <!-- Ranking com Jogadores -->
        <div class="form-group full-width">
            <h4>ğŸ† Ranking da Partida</h4>
            <div class="ranking-players">
                <div class="ranking-position">
                    <label>ğŸ¥‡ 1Âº Lugar</label>
                    <select id="firstPlace" required>
                        <option value="">Selecione o jogador...</option>
                    </select>
                </div>
                <div class="ranking-position">
                    <label>ğŸ¥ˆ 2Âº Lugar</label>
                    <select id="secondPlace" required>
                        <option value="">Selecione o jogador...</option>
                    </select>
                </div>
                <div class="ranking-position">
                    <label>ğŸ¥‰ 3Âº Lugar</label>
                    <select id="thirdPlace" required>
                        <option value="">Selecione o jogador...</option>
                    </select>
                </div>
                <div class="ranking-position">
                    <label>4ï¸âƒ£ 4Âº Lugar</label>
                    <select id="fourthPlace" required>
                        <option value="">Selecione o jogador...</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Remover o campo ranking antigo -->
        <!-- <div class="form-group">
            <label for="ranking">ğŸ“Š Ranking</label>
            <select id="ranking" required>
                <option value="">Selecione...</option>
                <option value="1">1Âº Lugar</option>
                <option value="2">2Âº Lugar</option>
                <option value="3">3Âº Lugar</option>
                <option value="4">4Âº Lugar</option>
            </select>
        </div> -->
        
        <!-- ObservaÃ§Ãµes -->
        <div class="form-group full-width">
            <label for="observations">ğŸ“ ObservaÃ§Ãµes</label>
            <textarea id="observations" rows="4" placeholder="ObservaÃ§Ãµes sobre a partida, estratÃ©gias, momentos marcantes..."></textarea>
        </div>
        
        <!-- BotÃµes de AÃ§Ã£o -->
        <div class="form-actions">
            <button type="button" id="cancelMatch" class="cancel-btn">âŒ Cancelar</button>
            <button type="button" id="saveMatch" class="save-btn">ğŸ’¾ Salvar Partida</button>
        </div>
    </div>
</div>
    <!-- Avatar Selection Modal -->
    <div id="avatarModal" class="avatar-modal">
        <div class="avatar-modal-content">
            <h2>ğŸ–¼ï¸ Personalizar Avatar</h2>
            
            <!-- Abas do Modal -->
            <div class="avatar-tabs">
                <button class="avatar-tab active" data-tab="avatars">ğŸ‘¤ Avatares</button>
                <button class="avatar-tab" data-tab="frames">ğŸ–¼ï¸ Frames</button>
            </div>
            
            <!-- ConteÃºdo das Abas -->
            <div class="avatar-tab-content">
                <!-- Aba de Avatares -->
                <div class="tab-panel active" id="avatars-panel">
                    <div class="avatar-grid" id="avatarGrid">
                        <!-- Avatares serÃ£o carregados via JavaScript -->
                    </div>
                </div>
                
                <!-- Aba de Frames -->
                <div class="tab-panel" id="frames-panel">
                    <div class="frame-grid" id="frameGrid">
                        <!-- Frames serÃ£o carregados via JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="avatar-modal-actions">
                <button type="button" id="cancelAvatar" class="cancel-avatar">âŒ Cancelar</button>
                <button type="button" id="saveAvatar" class="save-avatar">âœ… Salvar</button>
            </div>
        </div>
    </div>

    <!-- New Player Modal -->
    <div id="newPlayerModal" class="new-player-modal">
        <div class="new-player-content">
            <h2>ğŸ†• Criar Novo Jogador</h2>
            <form id="newPlayerForm" class="new-player-form">
                <div class="form-group">
                    <label for="newPlayerName">ğŸ‘¤ Nome do Jogador</label>
                    <input type="text" id="newPlayerName" placeholder="Ex: JoÃ£o - Mestre dos Elementos" required>
                </div>
                
                <div class="form-group">
                    <label for="newPlayerEmail">ğŸ“§ Email</label>
                    <input type="email" id="newPlayerEmail" placeholder="Ex: joao@exemplo.com" required>
                </div>
                
                <div class="form-group">
                    <label for="newPlayerPassword">ğŸ”’ Senha</label>
                    <input type="password" id="newPlayerPassword" placeholder="Senha para login" required>
                </div>
                
                <div class="form-group">
                    <label for="newPlayerTitle">ğŸ† TÃ­tulo Inicial</label>
                    <input type="text" id="newPlayerTitle" placeholder="Ex: Planeswalker Iniciante" value="Planeswalker Iniciante">
                </div>
                
                <div class="form-group">
                    <label for="newPlayerAvatar">ğŸ–¼ï¸ URL do Avatar (opcional)</label>
                    <input type="url" id="newPlayerAvatar" placeholder="https://exemplo.com/avatar.jpg">
                </div>
                
                <div class="new-player-actions">
                    <button type="button" id="cancelNewPlayer" class="cancel-new-player">âŒ Cancelar</button>
                    <button type="submit" id="createPlayer" class="create-player">âœ¨ Criar Jogador</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Gerenciamento de Conquistas em Destaque -->
    <div id="featuredManagementModal" class="featured-modal">
        <div class="featured-modal-content">
            <span class="close">&times;</span>
            <h2>â­ Gerenciar Conquistas em Destaque</h2>
            <p>Selecione atÃ© 5 conquistas para destacar no seu perfil:</p>
            
            <!-- Filtros e Controles do Modal -->
            <div class="featured-modal-controls">
                <div class="featured-modal-filters">
                    <label for="featuredCategoryFilter">ğŸ“‚ Categoria:</label>
                    <select id="featuredCategoryFilter" class="category-filter">
                        <option value="all">Todas as Categorias</option>
                        <option value="VitÃ³ria">ğŸ† VitÃ³ria</option>
                        <option value="Archenemy">âš”ï¸ Archenemy</option>
                        <option value="Mulligan">ğŸ”„ Mulligan</option>
                        <option value="Land Drop">ğŸ”ï¸ Land Drop</option>
                        <option value="Comandante">ğŸ‘‘ Comandante</option>
                    </select>
                </div>
                <div class="featured-modal-search">
                    <input type="text" id="featuredAchievementSearch" placeholder="ğŸ” Buscar conquistas..." class="achievement-search-input">
                </div>
            </div>
            
            <div id="featuredSelectionGrid" class="featured-selection-grid">
                <!-- Conquistas serÃ£o carregadas via JavaScript -->
            </div>
            <div class="featured-modal-actions">
                <button type="button" id="cancelFeaturedBtn" class="cancel-featured">âŒ Cancelar</button>
                <button type="button" id="saveFeaturedBtn" class="save-featured">âœ… Salvar SeleÃ§Ã£o</button>
            </div>
        </div>
    </div>

    <!-- Adicionar antes do script.js -->
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    
    <script src="achievements.js"></script>
    <script src="script.js"></script>
    <!-- Modal para Alterar Senha -->
    <div id="changePasswordModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>ğŸ”’ Alterar Senha</h2>
            <form id="changePasswordForm">
                <div class="form-group">
                    <label for="currentPassword">Senha Atual:</label>
                    <input type="password" id="currentPassword" required>
                </div>
                <div class="form-group">
                    <label for="newPassword">Nova Senha:</label>
                    <input type="password" id="newPassword" required>
                </div>
                <div class="form-group">
                    <label for="confirmPassword">Confirmar Nova Senha:</label>
                    <input type="password" id="confirmPassword" required>
                </div>
                <button type="submit">Alterar Senha</button>
                <div id="changePasswordError" class="error-message"></div>
            </form>
        </div>
    </div>

    <!-- Modal de Maestria de Comandante -->
    <div id="commanderMasteryModal" class="commander-mastery-modal">
        <div class="mastery-modal-content">
            <span class="mastery-close">&times;</span>
            <div class="commander-mastery-header">
                <div class="commander-image-large">
                    <img id="masteryCommanderImage" src="" alt="">
                </div>
                <div class="commander-title-info">
                    <h2 id="masteryCommanderName"></h2>
                </div>
            </div>
            
            <div class="commander-mastery-body">
                <!-- EstatÃ­sticas Atuais -->
                <div class="mastery-stats-section">
                    <h3>ğŸ“Š EstatÃ­sticas</h3>
                    <div class="mastery-stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ†</div>
                            <div class="stat-info">
                                <span class="stat-label">Winrate</span>
                                <span id="masteryWinrate" class="stat-value">0%</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">âš”ï¸</div>
                            <div class="stat-info">
                                <span class="stat-label">Partidas</span>
                                <span id="masteryMatches" class="stat-value">0</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ¯</div>
                            <div class="stat-info">
                                <span class="stat-label">VitÃ³rias</span>
                                <span id="masteryWins" class="stat-value">0</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸ’€</div>
                            <div class="stat-info">
                                <span class="stat-label">Removido</span>
                                <span id="masteryRemovals" class="stat-value">0x</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">ğŸƒ</div>
                            <div class="stat-info">
                                <span class="stat-label">Carta do Jogo</span>
                                <span id="masteryGameCard" class="stat-value">0x</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sistema de Tiers -->
                <div class="mastery-tiers-section">
                    <h3>â­ Progresso de Maestria</h3>
                    <div class="current-tier-info">
                        <span>Tier Atual: <span id="currentTierDisplay">Spark</span></span>
                        <span class="tier-progress-text">
                            <span id="currentTierProgress">0</span>% para prÃ³ximo tier
                        </span>
                    </div>
                    
                    <!-- Barra de Progresso ContÃ­nua -->
                    <div class="tier-progress-container">
                        <div class="tier-progress-line">
                            <div id="tierProgressFill" class="tier-progress-fill"></div>
                        </div>
                        <div class="tier-markers">
                            <div class="tier-marker" data-tier="spark">
                                <div class="tier-circle spark">
                                    <span class="tier-icon">âš¡</span>
                                </div>
                                <div class="tier-label">Spark</div>
                                <div class="tier-requirement">1+ partida</div>
                            </div>
                            <div class="tier-marker" data-tier="ember">
                                <div class="tier-circle ember">
                                    <span class="tier-icon">ğŸ”¥</span>
                                </div>
                                <div class="tier-label">Ember</div>
                                <div class="tier-requirement">25 vitÃ³rias + 1x carta da partida</div>
                            </div>
                            <div class="tier-marker" data-tier="lord">
                                <div class="tier-circle lord">
                                    <span class="tier-icon">ğŸ‘‘</span>
                                </div>
                                <div class="tier-label">Lord</div>
                                <div class="tier-requirement">50 vitÃ³rias + 5x carta da partida</div>
                            </div>
                            <div class="tier-marker" data-tier="titan">
                                <div class="tier-circle titan">
                                    <span class="tier-icon">ğŸŒŒ</span>
                                </div>
                                <div class="tier-label">Titan</div>
                                <div class="tier-requirement">75 vitÃ³rias + 50% WR + 10x carta da partida</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SeÃ§Ã£o de Recompensas Futuras -->
                <div class="mastery-rewards-section">
                    <h3>ğŸ PrÃ³ximas Recompensas</h3>
                    <div class="next-rewards-container">
                        <div class="next-reward-item">
                            <div class="reward-level">NÃ­vel <span id="nextRewardLevel">2</span></div>
                            <div class="reward-description">
                                <span class="reward-type">TÃ­tulo:</span>
                                <span id="nextRewardTitle">"Aprendiz de [Comandante]"</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
